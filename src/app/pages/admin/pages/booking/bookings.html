<div class="bookings-container">
  <!-- Header Section -->
  <div class="bookings-header">
    <div class="header-content">
      <h1 class="page-title">
        <i class="fas fa-calendar-check title-icon"></i>
        Bookings Management
      </h1>
      <p class="page-subtitle">Monitor and manage all property bookings</p>
    </div>
    <div class="header-actions">
      <button 
        class="btn btn-primary" 
        (click)="refreshBookings()"
        [disabled]="loading">
        <i class="fas fa-sync-alt" [class.fa-spin]="loading"></i>
        Refresh
      </button>
    </div>
  </div>

  <!-- Statistics Grid -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-number">{{ totalBookingsCount }}</div>
        <div class="stat-label">Total Bookings</div>
      </div>
      <div class="stat-icon">
        <i class="fas fa-calendar-alt"></i>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-number">{{ completedBookingsCount }}</div>
        <div class="stat-label">Completed</div>
      </div>
      <div class="stat-icon">
        <i class="fas fa-check-circle"></i>
      </div>
    </div> 


     <div class="stat-card">
    <div class="stat-content">
      <div class="stat-number">{{ confirmedBookingsCount }}</div>
      <div class="stat-label">Confirmed</div>
    </div>
    <div class="stat-icon">
      <i class="fas fa-calendar-check"></i>
    </div>
  </div>
  

    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-number">{{ pendingBookingsCount }}</div>
        <div class="stat-label">Pending</div>
      </div>
      <div class="stat-icon">
        <i class="fas fa-clock"></i>
      </div>
    </div>   
    

     <div class="stat-card">
    <div class="stat-content">
      <div class="stat-number">{{ cancelledBookingsCount }}</div>
      <div class="stat-label">Cancelled</div>
    </div>
    <div class="stat-icon">
      <i class="fas fa-times-circle"></i>
    </div>
  </div>


    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-number">${{ totalRevenue | number:'1.0-0' }}</div>
        <div class="stat-label">Total Revenue</div>
      </div>
      <div class="stat-icon">
        <i class="fas fa-dollar-sign"></i>
      </div>
    </div>
  </div>

  <!-- Bookings Table -->
  <div class="table-section">
    <app-table
      [columns]="columns"
      [data]="bookings"
      [actions]="actions"
      [loading]="loading"
      [paginationInfo]="paginationInfo"
      [useBackendPagination]="false"
      caption="All Property Bookings"
      (actionClick)="onActionClick($event)"
      (pageChange)="onPageChange($event)"
      (sortChange)="onSortChange($event)">
    </app-table>
  </div>

  <!-- Booking Details Modal -->
  <div 
    class="modal-overlay" 
    *ngIf="showBookingDetails" 
    (click)="closeBookingDetails()">
    <div 
      class="modal-container" 
      (click)="$event.stopPropagation()">
      
      <!-- Modal Header -->
      <div class="modal-header">
        <h3 class="modal-title">
          <i class="fas fa-calendar-check"></i>
          Booking Details #{{ selectedBooking?.id }}
        </h3>
        <button 
          class="modal-close" 
          (click)="closeBookingDetails()"
          aria-label="Close modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <!-- Modal Content -->
      <div class="modal-content" *ngIf="selectedBooking">
        
        <!-- Booking Status Header -->
        <div class="booking-status-header">
          <div class="status-badge" [style.background-color]="getStatusColor(selectedBooking.bookingStatus)">
            <i class="fas fa-circle status-icon"></i>
            {{ selectedBooking.bookingStatus }}
          </div>
          <div class="booking-dates">
            <div class="date-info">
              <i class="fas fa-calendar-alt"></i>
              <span>{{ getDaysDifference(selectedBooking.checkInDate, selectedBooking.checkOutDate) }} nights</span>
            </div>
          </div>
        </div>

        <!-- Guest Information -->
        <div class="section-header">
          <h4><i class="fas fa-user"></i> Guest Information</h4>
        </div>
        <div class="details-grid">
          <div class="detail-item">
            <label class="detail-label">Guest Name</label>
            <span class="detail-value">
              {{ selectedBooking.firstName }} {{ selectedBooking.lastName }}
            </span>
          </div>
          
          <div class="detail-item">
            <label class="detail-label">User ID</label>
            <span class="detail-value">{{ selectedBooking.userId }}</span>
          </div>
          
          <div class="detail-item">
            <label class="detail-label">Phone Number</label>
            <span class="detail-value">{{ selectedBooking.phoneNumber || 'Not provided' }}</span>
          </div>
          
          <div class="detail-item">
            <label class="detail-label">Country</label>
            <span class="detail-value">{{ selectedBooking.userCountry || 'Not specified' }}</span>
          </div>
        </div>

        <!-- Property Information -->
        <div class="section-header">
          <h4><i class="fas fa-building"></i> Property Information</h4>
        </div>
        <div class="details-grid">
          <div class="detail-item">
            <label class="detail-label">Property Title</label>
            <span class="detail-value">{{ selectedBooking.propertyTitle }}</span>
          </div>
          
          <div class="detail-item">
            <label class="detail-label">Property ID</label>
            <span class="detail-value">#{{ selectedBooking.propertyId }}</span>
          </div>
          
          <div class="detail-item">
            <label class="detail-label">City</label>
            <span class="detail-value">{{ selectedBooking.city }}</span>
          </div>
          
          <div class="detail-item">
            <label class="detail-label">Country</label>
            <span class="detail-value">{{ selectedBooking.country }}</span>
          </div>
        </div>

        <!-- Booking Details -->
        <div class="section-header">
          <h4><i class="fas fa-info-circle"></i> Booking Details</h4>
        </div>
        <div class="details-grid">
          <div class="detail-item">
            <label class="detail-label">Check-in Date</label>
            <span class="detail-value">{{ selectedBooking.checkInDate | date:'fullDate' }}</span>
          </div>
          
          <div class="detail-item">
            <label class="detail-label">Check-out Date</label>
            <span class="detail-value">{{ selectedBooking.checkOutDate | date:'fullDate' }}</span>
          </div>
          
          <div class="detail-item">
            <label class="detail-label">Number of Guests</label>
            <span class="detail-value">{{ selectedBooking.numberOfGuests }}</span>
          </div>
          
          <div class="detail-item">
            <label class="detail-label">Total Price</label>
            <span class="detail-value price-highlight">${{ selectedBooking.totalPrice | number:'1.2-2' }}</span>
          </div>
        </div>

        <!-- Quick Actions -->
        
      </div>
      
      <div class="modal-footer">
        <button 
          class="btn btn-secondary" 
          (click)="closeBookingDetails()">
          <i class="fas fa-times"></i>
          Close
        </button>
      </div>
    </div>
  </div>
  <div class="loading-overlay" *ngIf="loading">
    <div class="loading-spinner">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Loading bookings...</p>
    </div>
  </div>
</div>